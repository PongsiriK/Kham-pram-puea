<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Online Word Cards</title>
</head>
<body>
  <h2>Join a Room</h2>
  <input id="roomCode" placeholder="Enter room code" />
  <button onclick="joinRoom()">Join</button>
  <div id="cardContainer"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <script>
    // TODO: Replace with your Firebase project config
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDWVntpmELhdLufyHB4VFQA9pHE_pfxeV4",
  authDomain: "kham-pram-puea.firebaseapp.com",
  databaseURL: "https://kham-pram-puea-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "kham-pram-puea",
  storageBucket: "kham-pram-puea.firebasestorage.app",
  messagingSenderId: "971556304520",
  appId: "1:971556304520:web:58969028eb240c5cd5513d",
  measurementId: "G-N5QBBJX55R"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const wordPool = ["apple", "banana", "cat", "dog", "elephant", "fish", "grape", "hat", "ice", "jungle"];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function joinRoom() {
      const code = document.getElementById("roomCode").value.trim();
      if (!code) return alert("Please enter a room code");

      const roomRef = db.ref("rooms/" + code);

      roomRef.once("value", (snapshot) => {
        if (!snapshot.exists()) {
          // Create room with shuffled words
          const shuffledWords = shuffle([...wordPool]);
          roomRef.set({ words: shuffledWords });
        }

        // Now listen to the words in the room
        roomRef.child("words").once("value", (snap) => {
          const words = snap.val();
          displayCards(words);
        });
      });
    }

    function displayCards(words) {
      const container = document.getElementById("cardContainer");
      container.innerHTML = "";
      words.forEach((word) => {
        const card = document.createElement("div");
        card.textContent = word;
        card.style.padding = "10px";
        card.style.margin = "5px";
        card.style.border = "1px solid black";
        container.appendChild(card);
      });
    }
  </script>
</body>
</html>
